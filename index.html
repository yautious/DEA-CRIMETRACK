<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEA Crime Tracking System</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect width="20" height="20" fill="none"/><circle cx="3" cy="3" r="0.5" fill="%23c62828" opacity="0.1"/></svg>') repeat;
            pointer-events: none;
            z-index: -1;
        }
        .navbar {
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
            background: linear-gradient(to right, #c62828, #d32f2f);
            position: relative;
            z-index: 1000;
        }
        .nav-link {
            color: #fff !important;
            padding: 0.5rem 1rem;
            margin: 0 0.2rem;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            background-color: rgba(255,255,255,0.2);
            border-radius: 4px;
            transform: translateY(-2px);
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(198, 40, 40, 0.1);
            margin-bottom: 20px;
            transition: all 0.3s ease;
            border: none;
            border-radius: 15px;
            overflow: hidden;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, #c62828, #d32f2f);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        .card:hover::before {
            transform: scaleX(1);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,.1);
        }
        .welcome-section {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 10px 20px rgba(198, 40, 40, 0.1);
            position: relative;
            overflow: hidden;
        }
        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, #c62828, #d32f2f, #c62828);
        }
        .feature-icon {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #c62828, #d32f2f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }
        .card:hover .feature-icon {
            transform: scale(1.1);
        }
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .display-4 {
            background: linear-gradient(45deg, #c62828, #d32f2f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
        }
        .lead {
            color: #455a64;
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 3rem;
        }
        .card-title {
            color: #c62828;
            font-weight: bold;
        }
        .card-text {
            color: #455a64;
        }
        .data-section {
            display: none;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(198, 40, 40, 0.1);
        }
        .data-section.active {
            display: block;
        }
        .table {
            margin-top: 20px;
        }
        .table th {
            background-color: #c62828;
            color: white;
        }
        .action-buttons .btn {
            margin: 0 5px;
        }
        .list-group-item {
            border: none;
            margin-bottom: 5px;
            border-radius: 8px !important;
            transition: all 0.3s ease;
            background: transparent;
        }
        .list-group-item:hover {
            background: rgba(26, 35, 126, 0.1);
            transform: translateX(5px);
        }
        .btn-primary {
            background-color: #c62828;
            border-color: #c62828;
        }
        .btn-primary:hover {
            background-color: #d32f2f;
            border-color: #d32f2f;
        }
        .btn-info {
            background-color: #c62828;
            border-color: #c62828;
            color: white;
        }
        .btn-info:hover {
            background-color: #d32f2f;
            border-color: #d32f2f;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <!-- Welcome Section -->
        <div class="welcome-section" id="welcome">
            <div class="welcome-content">
                <h1 class="display-4 mb-4">Welcome to DEA Crime Tracking System</h1>
                <p class="lead mb-4">A comprehensive system for tracking and managing drug enforcement activities.</p>
                <div class="row justify-content-center">
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="bi bi-shield-check feature-icon"></i>
                                <h5 class="card-title">Officer Management</h5>
                                <p class="card-text">Track and manage DEA officers and their assignments with our advanced monitoring system</p>
                                <div class="list-group mt-3">
                                    <a href="#" class="list-group-item list-group-item-action" data-section="officers">
                                        <i class="bi bi-person-badge me-2"></i>Officers
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="cases">
                                        <i class="bi bi-folder me-2"></i>Cases
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="arrests">
                                        <i class="bi bi-handcuffs me-2"></i>Arrests
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="bi bi-folder-check feature-icon"></i>
                                <h5 class="card-title">Suspect Tracking</h5>
                                <p class="card-text">Track and manage suspect profiles, criminal records, and investigation status</p>
                                <div class="list-group mt-3">
                                    <a href="#" class="list-group-item list-group-item-action" data-section="suspects">
                                        <i class="bi bi-person-x me-2"></i>Suspects
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="drugs">
                                        <i class="bi bi-capsule me-2"></i>Drugs
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="violations">
                                        <i class="bi bi-exclamation-triangle me-2"></i>Violations
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="seizures">
                                        <i class="bi bi-box-seam me-2"></i>Seizures
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="evidence">
                                        <i class="bi bi-file-earmark-text me-2"></i>Evidence
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="legal">
                                        <i class="bi bi-gavel me-2"></i>Legal Proceedings
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action" data-section="rewards">
                                        <i class="bi bi-award me-2"></i>Rewards
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Sections -->
        <div id="officers" class="data-section">
            <h2>Officers</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('officers')">
                    <i class="bi bi-plus-circle"></i> Add New Officer
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Badge Number</th>
                            <th>Rank</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="officersTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="suspects" class="data-section">
            <h2>Suspects</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('suspects')">
                    <i class="bi bi-plus-circle"></i> Add New Suspect
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Date of Birth</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="suspectsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="cases" class="data-section">
            <h2>Cases</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('cases')">
                    <i class="bi bi-plus-circle"></i> Add New Case
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Case Number</th>
                            <th>Title</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="casesTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="drugs" class="data-section">
            <h2>Drugs</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('drugs')">
                    <i class="bi bi-plus-circle"></i> Add New Drug
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Schedule</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="drugsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="violations" class="data-section">
            <h2>Violations</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('violations')">
                    <i class="bi bi-plus-circle"></i> Add New Violation
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Severity</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="violationsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="seizures" class="data-section">
            <h2>Seizures</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('seizures')">
                    <i class="bi bi-plus-circle"></i> Add New Seizure
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Date</th>
                            <th>Location</th>
                            <th>Value</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="seizuresTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="evidence" class="data-section">
            <h2>Evidence</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('evidence')">
                    <i class="bi bi-plus-circle"></i> Add New Evidence
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="evidenceTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="arrests" class="data-section">
            <h2>Arrests</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('arrests')">
                    <i class="bi bi-plus-circle"></i> Add New Arrest
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Date</th>
                            <th>Suspect</th>
                            <th>Location</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="arrestsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="legal" class="data-section">
            <h2>Legal Proceedings</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('legal')">
                    <i class="bi bi-plus-circle"></i> Add New Proceeding
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Case</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="legalTableBody"></tbody>
                </table>
            </div>
        </div>

        <div id="rewards" class="data-section">
            <h2>Rewards</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <button class="btn btn-primary" onclick="addNewRecord('rewards')">
                    <i class="bi bi-plus-circle"></i> Add New Reward
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="updateDatabaseFile()">
                        <i class="bi bi-save"></i> Update Database.sql
                    </button>
                    <button class="btn btn-secondary" onclick="exportDatabaseFile()">
                        <i class="bi bi-download"></i> Export Database.sql
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Amount</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="rewardsTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Record</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <input type="hidden" id="editId">
                        <input type="hidden" id="editSection">
                        <div id="editFields"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveEdit()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // User's actual data
        const userData = {
            officers: [
                { id: 1000, name: "Amit Sharma", badge: "1000", rank: "Inspector" },
                { id: 1001, name: "Priya Mehta", badge: "1001", rank: "Sub-Inspector" },
                { id: 1002, name: "Rahul Verma", badge: "1002", rank: "Sub-Inspector" },
                { id: 1003, name: "Neha Joshi", badge: "1003", rank: "Sergeant" },
                { id: 1004, name: "Vikram Patel", badge: "1004", rank: "Sergeant" },
                { id: 1005, name: "Sneha Reddy", badge: "1005", rank: "Inspector" },
                { id: 1006, name: "Anil Kumar", badge: "1006", rank: "Sub-Inspector" },
                { id: 1007, name: "Pooja Singh", badge: "1007", rank: "Sergeant" },
                { id: 1008, name: "Ravi Desai", badge: "1008", rank: "Inspector" },
                { id: 1009, name: "Kiran Rao", badge: "1009", rank: "Sub-Inspector" }
            ],
            suspects: [
                { id: 2000, name: "Rajesh Kumar", dob: "1982-01-15", status: "Arrested" },
                { id: 2001, name: "Suman Gupta", dob: "1985-02-12", status: "At Large" },
                { id: 2002, name: "Deepak Singh", dob: "1988-03-10", status: "Arrested" },
                { id: 2003, name: "Aarti Jain", dob: "1981-04-05", status: "Arrested" },
                { id: 2004, name: "Manoj Yadav", dob: "1983-05-20", status: "At Large" },
                { id: 2005, name: "Kavita Nair", dob: "1984-06-22", status: "Arrested" },
                { id: 2006, name: "Rakesh Bhat", dob: "1980-07-30", status: "Arrested" },
                { id: 2007, name: "Lata Thakur", dob: "1986-08-25", status: "At Large" },
                { id: 2008, name: "Naveen Joshi", dob: "1989-09-19", status: "Arrested" },
                { id: 2009, name: "Pinky Rani", dob: "1987-10-21", status: "At Large" }
            ],
            cases: [
                { id: 4000, caseNumber: "Case-0", title: "Drug case in Mumbai", status: "Open" },
                { id: 4001, caseNumber: "Case-1", title: "Raid in Delhi", status: "Open" },
                { id: 4002, caseNumber: "Case-2", title: "Seizure in Bangalore", status: "Closed" },
                { id: 4003, caseNumber: "Case-3", title: "Smuggling case in Pune", status: "Open" },
                { id: 4004, caseNumber: "Case-4", title: "Drug bust in Chennai", status: "Closed" },
                { id: 4005, caseNumber: "Case-5", title: "Undercover operation in Hyderabad", status: "Open" },
                { id: 4006, caseNumber: "Case-6", title: "Informant tip in Kolkata", status: "Closed" },
                { id: 4007, caseNumber: "Case-7", title: "International link in Ahmedabad", status: "Open" },
                { id: 4008, caseNumber: "Case-8", title: "Distribution in Jaipur", status: "Closed" },
                { id: 4009, caseNumber: "Case-9", title: "Rehabilitation escapee in Lucknow", status: "Open" }
            ],
            drugs: [
                { id: 3000, name: "Cocaine", type: "Narcotic", schedule: "Illegal" },
                { id: 3001, name: "Heroin", type: "Narcotic", schedule: "Illegal" },
                { id: 3002, name: "MDMA", type: "Stimulant", schedule: "Illegal" },
                { id: 3003, name: "LSD", type: "Hallucinogen", schedule: "Illegal" },
                { id: 3004, name: "Meth", type: "Stimulant", schedule: "Illegal" },
                { id: 3005, name: "Ganja", type: "Cannabis", schedule: "Illegal" },
                { id: 3006, name: "Opium", type: "Narcotic", schedule: "Illegal" },
                { id: 3007, name: "Hashish", type: "Cannabis", schedule: "Illegal" },
                { id: 3008, name: "Morphine", type: "Narcotic", schedule: "Controlled" },
                { id: 3009, name: "Ketamine", type: "Dissociative", schedule: "Controlled" }
            ],
            violations: [
                { id: 5000, type: "Possession", description: "NDPS-100", severity: "Prison" },
                { id: 5001, type: "Trafficking", description: "NDPS-101", severity: "Prison" },
                { id: 5002, type: "Distribution", description: "NDPS-102", severity: "Prison" },
                { id: 5003, type: "Possession", description: "NDPS-103", severity: "Fine" },
                { id: 5004, type: "Possession", description: "NDPS-104", severity: "Prison" },
                { id: 5005, type: "Trafficking", description: "NDPS-105", severity: "Prison" },
                { id: 5006, type: "Possession", description: "NDPS-106", severity: "Fine" },
                { id: 5007, type: "Distribution", description: "NDPS-107", severity: "Prison" },
                { id: 5008, type: "Possession", description: "NDPS-108", severity: "Fine" },
                { id: 5009, type: "Trafficking", description: "NDPS-109", severity: "Prison" }
            ],
            seizures: [
                { id: 6000, date: "2023-02-10", location: "Mumbai", value: "25.0 kg" },
                { id: 6001, date: "2023-02-11", location: "Delhi", value: "30.0 kg" },
                { id: 6002, date: "2023-02-12", location: "Bangalore", value: "20.0 kg" },
                { id: 6003, date: "2023-02-13", location: "Pune", value: "15.0 kg" },
                { id: 6004, date: "2023-02-14", location: "Chennai", value: "40.0 kg" },
                { id: 6005, date: "2023-02-15", location: "Hyderabad", value: "10.0 kg" },
                { id: 6006, date: "2023-02-16", location: "Kolkata", value: "12.0 kg" },
                { id: 6007, date: "2023-02-17", location: "Ahmedabad", value: "18.0 kg" },
                { id: 6008, date: "2023-02-18", location: "Jaipur", value: "22.0 kg" },
                { id: 6009, date: "2023-02-19", location: "Lucknow", value: "28.0 kg" }
            ],
            evidence: [
                { id: 7000, type: "Drug Sample", description: "Sample of drug seized", status: "In Storage" },
                { id: 7001, type: "Container", description: "Plastic bag with substance", status: "Under Review" },
                { id: 7002, type: "Chemical", description: "Liquid chemical found", status: "Analyzed" },
                { id: 7003, type: "Equipment", description: "Syringes with residue", status: "In Storage" },
                { id: 7004, type: "Drug Package", description: "Pill packets seized", status: "Under Review" },
                { id: 7005, type: "Substance", description: "Powdered substance", status: "Analyzed" },
                { id: 7006, type: "Drug Package", description: "Suspicious capsules", status: "In Storage" },
                { id: 7007, type: "Drug Package", description: "Cloth wrap with hashish", status: "Under Review" },
                { id: 7008, type: "Equipment", description: "Syringe and tubes", status: "Analyzed" },
                { id: 7009, type: "Container", description: "Plastic container", status: "In Storage" }
            ],
            arrests: [
                { id: 8000, date: "2023-04-10", suspect: "Rajesh Kumar", location: "Mumbai" },
                { id: 8001, date: "2023-04-11", suspect: "Suman Gupta", location: "Delhi" },
                { id: 8002, date: "2023-04-12", suspect: "Deepak Singh", location: "Bangalore" },
                { id: 8003, date: "2023-04-13", suspect: "Aarti Jain", location: "Pune" },
                { id: 8004, date: "2023-04-14", suspect: "Manoj Yadav", location: "Chennai" },
                { id: 8005, date: "2023-04-15", suspect: "Kavita Nair", location: "Hyderabad" },
                { id: 8006, date: "2023-04-16", suspect: "Rakesh Bhat", location: "Kolkata" },
                { id: 8007, date: "2023-04-17", suspect: "Lata Thakur", location: "Ahmedabad" },
                { id: 8008, date: "2023-04-18", suspect: "Naveen Joshi", location: "Jaipur" },
                { id: 8009, date: "2023-04-19", suspect: "Pinky Rani", location: "Lucknow" }
            ],
            legal: [
                { id: 9000, case: "Case-0", type: "Trial", status: "Guilty" },
                { id: 9001, case: "Case-1", type: "Trial", status: "Guilty" },
                { id: 9002, case: "Case-2", type: "Trial", status: "Not Guilty" },
                { id: 9003, case: "Case-3", type: "Trial", status: "Guilty" },
                { id: 9004, case: "Case-4", type: "Trial", status: "Guilty" },
                { id: 9005, case: "Case-5", type: "Trial", status: "Guilty" },
                { id: 9006, case: "Case-6", type: "Trial", status: "Guilty" },
                { id: 9007, case: "Case-7", type: "Trial", status: "Guilty" },
                { id: 9008, case: "Case-8", type: "Trial", status: "Not Guilty" },
                { id: 9009, case: "Case-9", type: "Trial", status: "Guilty" }
            ],
            rewards: [
                { id: 10000, amount: "1000", description: "Information leading to arrest", status: "Paid" },
                { id: 10001, amount: "2000", description: "Information leading to arrest", status: "Paid" },
                { id: 10002, amount: "2500", description: "Information leading to arrest", status: "Paid" },
                { id: 10003, amount: "3000", description: "Information leading to arrest", status: "Paid" },
                { id: 10004, amount: "5000", description: "Information leading to arrest", status: "Paid" },
                { id: 10005, amount: "2000", description: "Information leading to arrest", status: "Paid" },
                { id: 10006, amount: "3000", description: "Information leading to arrest", status: "Paid" },
                { id: 10007, amount: "1000", description: "Information leading to arrest", status: "Paid" },
                { id: 10008, amount: "2500", description: "Information leading to arrest", status: "Paid" },
                { id: 10009, amount: "3000", description: "Information leading to arrest", status: "Paid" }
            ]
        };

        // Function to show/hide sections
        document.addEventListener('DOMContentLoaded', function() {
            // Add click event listeners to all list group items
            document.querySelectorAll('.list-group-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    if (sectionId) {
                        // Hide welcome section
                        document.getElementById('welcome').style.display = 'none';
                        // Hide all data sections
                        document.querySelectorAll('.data-section').forEach(section => {
                            section.classList.remove('active');
                        });
                        // Show selected section
                        document.getElementById(sectionId).classList.add('active');
                        // Load data for the section
                        loadData(sectionId);
                    }
                });
            });

            // Add home navigation
            const brandLink = document.createElement('a');
            brandLink.href = '#';
            brandLink.className = 'btn btn-outline-primary position-fixed top-0 start-0 m-3';
            brandLink.innerHTML = '<i class="bi bi-house-door"></i> Home';
            brandLink.addEventListener('click', function(e) {
                e.preventDefault();
                // Show welcome section
                document.getElementById('welcome').style.display = 'block';
                // Hide all data sections
                document.querySelectorAll('.data-section').forEach(section => {
                    section.classList.remove('active');
                });
            });
            document.body.appendChild(brandLink);

            // Add buttons to the welcome section
            const welcomeSection = document.getElementById('welcome');
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'd-flex justify-content-center gap-2 mt-3';
            
            // Update button
            const updateButton = document.createElement('button');
            updateButton.className = 'btn btn-primary';
            updateButton.innerHTML = '<i class="bi bi-save"></i> Update Database.sql';
            updateButton.onclick = function() {
                updateDatabaseFile(true);
            };
            buttonContainer.appendChild(updateButton);
            
            // Export button
            const exportButton = document.createElement('button');
            exportButton.className = 'btn btn-secondary';
            exportButton.innerHTML = '<i class="bi bi-download"></i> Export Database.sql';
            exportButton.onclick = exportDatabaseFile;
            buttonContainer.appendChild(exportButton);
            
            welcomeSection.appendChild(buttonContainer);
            
            // Initialize the database.sql content in localStorage
            if (!localStorage.getItem('databaseSql')) {
                updateDatabaseFile(false);
            }
            
            // Add event listeners to all update database buttons
            document.querySelectorAll('button[onclick="updateDatabaseFile()"]').forEach(button => {
                button.onclick = function() {
                    updateDatabaseFile(true);
                };
            });

            // Add breadcrumb navigation
            const breadcrumbContainer = document.createElement('nav');
            breadcrumbContainer.setAttribute('aria-label', 'breadcrumb');
            breadcrumbContainer.className = 'position-fixed top-0 start-50 translate-middle-x mt-3';
            breadcrumbContainer.style.zIndex = '1000';
            
            function updateBreadcrumb(section) {
                breadcrumbContainer.innerHTML = `
                    <ol class="breadcrumb bg-white px-3 py-2 rounded shadow-sm">
                        <li class="breadcrumb-item"><a href="#" class="home-link">Home</a></li>
                        ${section ? `<li class="breadcrumb-item active">${section.charAt(0).toUpperCase() + section.slice(1)}</li>` : ''}
                    </ol>
                `;
                
                // Add click event for home link
                breadcrumbContainer.querySelector('.home-link').addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('welcome').style.display = 'block';
                    document.querySelectorAll('.data-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    updateBreadcrumb();
                });
            }
            
            document.body.appendChild(breadcrumbContainer);
            updateBreadcrumb();

            // Update breadcrumb when section changes
            document.querySelectorAll('.list-group-item').forEach(link => {
                link.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    updateBreadcrumb(section);
                });
            });
        });

        // Function to load data into tables
        function loadData(section) {
            const tableBody = document.getElementById(`${section}TableBody`);
            if (tableBody && userData[section]) {
                if (userData[section].length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="5" class="text-center">No data available</td></tr>`;
                    return;
                }
                
                tableBody.innerHTML = userData[section].map(item => {
                    let row = `<tr>
                        <td>${item.id || ''}</td>`;
                    
                    // Add cells based on section type
                    switch(section) {
                        case 'officers':
                            row += `<td>${item.name || ''}</td>
                                   <td>${item.badge || ''}</td>
                                   <td>${item.rank || ''}</td>`;
                            break;
                        case 'suspects':
                            row += `<td>${item.name || ''}</td>
                                   <td>${item.dob || ''}</td>
                                   <td>${item.status || ''}</td>`;
                            break;
                        case 'cases':
                            row += `<td>${item.caseNumber || ''}</td>
                                   <td>${item.title || ''}</td>
                                   <td>${item.status || ''}</td>`;
                            break;
                        case 'drugs':
                            row += `<td>${item.name || ''}</td>
                                   <td>${item.type || ''}</td>
                                   <td>${item.schedule || ''}</td>`;
                            break;
                        case 'violations':
                            row += `<td>${item.type || ''}</td>
                                   <td>${item.description || ''}</td>
                                   <td>${item.severity || ''}</td>`;
                            break;
                        case 'seizures':
                            row += `<td>${item.date || ''}</td>
                                   <td>${item.location || ''}</td>
                                   <td>${item.value || ''}</td>`;
                            break;
                        case 'evidence':
                            row += `<td>${item.type || ''}</td>
                                   <td>${item.description || ''}</td>
                                   <td>${item.status || ''}</td>`;
                            break;
                        case 'arrests':
                            row += `<td>${item.date || ''}</td>
                                   <td>${item.suspect || ''}</td>
                                   <td>${item.location || ''}</td>`;
                            break;
                        case 'legal':
                            row += `<td>${item.case || ''}</td>
                                   <td>${item.type || ''}</td>
                                   <td>${item.status || ''}</td>`;
                            break;
                        case 'rewards':
                            row += `<td>${item.amount || ''}</td>
                                   <td>${item.description || ''}</td>
                                   <td>${item.status || ''}</td>`;
                            break;
                    }
                    
                    // Add action buttons
                    row += `<td class="action-buttons">
                        <button class="btn btn-sm btn-info" onclick="editRecord('${section}', ${item.id})">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteRecord('${section}', ${item.id})">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td></tr>`;
                    
                    return row;
                }).join('');
            } else {
                tableBody.innerHTML = `<tr><td colspan="5" class="text-center">No data available</td></tr>`;
            }
        }

        // Function to add new record
        function addNewRecord(section) {
            // Create a new record with default values
            let newRecord = { id: generateNewId(section) };
            
            // Set default values based on section type
            switch(section) {
                case 'officers':
                    newRecord = {
                        ...newRecord,
                        name: "New Officer",
                        badge: "New Badge",
                        rank: "Officer"
                    };
                    break;
                case 'suspects':
                    newRecord = {
                        ...newRecord,
                        name: "New Suspect",
                        dob: new Date().toISOString().split('T')[0],
                        status: "At Large"
                    };
                    break;
                case 'cases':
                    newRecord = {
                        ...newRecord,
                        caseNumber: `Case-${newRecord.id}`,
                        title: "New Case",
                        status: "Open"
                    };
                    break;
                case 'drugs':
                    newRecord = {
                        ...newRecord,
                        name: "New Drug",
                        type: "Narcotic",
                        schedule: "Illegal"
                    };
                    break;
                case 'violations':
                    newRecord = {
                        ...newRecord,
                        type: "Possession",
                        description: "New Violation",
                        severity: "Fine"
                    };
                    break;
                case 'seizures':
                    newRecord = {
                        ...newRecord,
                        date: new Date().toISOString().split('T')[0],
                        location: "New Location",
                        value: "0.0 kg"
                    };
                    break;
                case 'evidence':
                    newRecord = {
                        ...newRecord,
                        type: "Drug Sample",
                        description: "New Evidence",
                        status: "In Storage"
                    };
                    break;
                case 'arrests':
                    newRecord = {
                        ...newRecord,
                        date: new Date().toISOString().split('T')[0],
                        suspect: "New Suspect",
                        location: "New Location"
                    };
                    break;
                case 'legal':
                    newRecord = {
                        ...newRecord,
                        case: `Case-${newRecord.id}`,
                        type: "Trial",
                        status: "Pending"
                    };
                    break;
                case 'rewards':
                    newRecord = {
                        ...newRecord,
                        amount: "1000",
                        description: "New Reward",
                        status: "Available"
                    };
                    break;
            }
            
            // Add the new record to the data
            userData[section].push(newRecord);
            
            // Update database.sql file without showing notification
            updateDatabaseFile(false);
            
            // Reload the data
            loadData(section);
            
            // Open the edit modal for the new record
            editRecord(section, newRecord.id);
        }
        
        // Function to generate a new ID for a section
        function generateNewId(section) {
            const ids = userData[section].map(item => item.id);
            const maxId = Math.max(...ids);
            return maxId + 1;
        }
        
        // Function to check if localStorage is available
        function isLocalStorageAvailable() {
            try {
                const test = '__storage_test__';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                return false;
            }
        }

        // Function to update the database.sql file
        function updateDatabaseFile(showNotification = true) {
            // Create the SQL content
            let sqlContent = `-- Create database
CREATE DATABASE IF NOT EXISTS dea_crime_tracker;
USE dea_crime_tracker;

-- Create tables and data
${generateSQLContent()}`;

            try {
                // Save to localStorage
                localStorage.setItem('databaseSql', sqlContent);
                console.log('Database SQL content saved to localStorage');
                
                if (showNotification) {
                    showNotification('Changes saved successfully');
                }
            } catch (error) {
                console.error('Error saving to localStorage:', error);
                showNotification('Error saving changes. Please try again.');
            }
        }

        // Function to generate SQL content
        function generateSQLContent() {
            let sqlContent = '';
            
            // Add data for each section
            sqlContent += "-- Officers\n";
            userData.officers.forEach(officer => {
                sqlContent += `INSERT INTO Officer (id, name, badge, rank) VALUES (${officer.id}, '${officer.name.replace(/'/g, "''")}', '${officer.badge}', '${officer.rank}');\n`;
            });

            sqlContent += "\n-- Suspects\n";
            userData.suspects.forEach(suspect => {
                sqlContent += `INSERT INTO Suspect (id, name, dob, status) VALUES (${suspect.id}, '${suspect.name.replace(/'/g, "''")}', '${suspect.dob}', '${suspect.status}');\n`;
            });

            sqlContent += "\n-- Drugs\n";
            userData.drugs.forEach(drug => {
                sqlContent += `INSERT INTO Drug (id, name, type, schedule) VALUES (${drug.id}, '${drug.name.replace(/'/g, "''")}', '${drug.type}', '${drug.schedule}');\n`;
            });

            sqlContent += "\n-- Cases\n";
            userData.cases.forEach(caseItem => {
                sqlContent += `INSERT INTO Case (id, caseNumber, title, status) VALUES (${caseItem.id}, '${caseItem.caseNumber}', '${caseItem.title.replace(/'/g, "''")}', '${caseItem.status}');\n`;
            });

            sqlContent += "\n-- Violations\n";
            userData.violations.forEach(violation => {
                sqlContent += `INSERT INTO Violation (id, type, description, severity) VALUES (${violation.id}, '${violation.type}', '${violation.description.replace(/'/g, "''")}', '${violation.severity}');\n`;
            });

            sqlContent += "\n-- Seizures\n";
            userData.seizures.forEach(seizure => {
                sqlContent += `INSERT INTO Seizure (id, date, location, value) VALUES (${seizure.id}, '${seizure.date}', '${seizure.location.replace(/'/g, "''")}', '${seizure.value}');\n`;
            });

            sqlContent += "\n-- Evidence\n";
            userData.evidence.forEach(evidence => {
                sqlContent += `INSERT INTO Evidence (id, type, description, status) VALUES (${evidence.id}, '${evidence.type}', '${evidence.description.replace(/'/g, "''")}', '${evidence.status}');\n`;
            });

            sqlContent += "\n-- Arrests\n";
            userData.arrests.forEach(arrest => {
                sqlContent += `INSERT INTO Arrest (id, date, suspect, location) VALUES (${arrest.id}, '${arrest.date}', '${arrest.suspect.replace(/'/g, "''")}', '${arrest.location.replace(/'/g, "''")}');\n`;
            });

            sqlContent += "\n-- Legal Proceedings\n";
            userData.legal.forEach(legal => {
                sqlContent += `INSERT INTO Legal (id, case, type, status) VALUES (${legal.id}, '${legal.case}', '${legal.type}', '${legal.status}');\n`;
            });

            sqlContent += "\n-- Rewards\n";
            userData.rewards.forEach(reward => {
                sqlContent += `INSERT INTO Reward (id, amount, description, status) VALUES (${reward.id}, '${reward.amount}', '${reward.description.replace(/'/g, "''")}', '${reward.status}');\n`;
            });

            return sqlContent;
        }

        // Function to show notifications
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'alert alert-success position-fixed top-0 end-0 m-3';
            notification.style.zIndex = '1050';
            notification.innerHTML = `
                <i class="bi bi-check-circle me-2"></i>
                ${message}
            `;
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Function to export database file
        function exportDatabaseFile() {
            try {
                // Get content from localStorage if available
                let sqlContent = localStorage.getItem('databaseSql');
                
                // If not in localStorage, generate it
                if (!sqlContent) {
                    sqlContent = `-- Create database
CREATE DATABASE IF NOT EXISTS dea_crime_tracker;
USE dea_crime_tracker;

-- Create tables and data
${generateSQLContent()}`;
                }

                // Create download
                const blob = new Blob([sqlContent], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'database.sql';
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
                
                showNotification('Database file exported successfully');
            } catch (error) {
                console.error('Error exporting database file:', error);
                showNotification('Error exporting database file. Please try again.');
            }
        }

        // Function to edit record
        function editRecord(section, id) {
            const record = userData[section].find(item => item.id === id);
            if (!record) return;

            // Set the hidden fields
            document.getElementById('editId').value = id;
            document.getElementById('editSection').value = section;

            // Clear previous fields
            const editFields = document.getElementById('editFields');
            editFields.innerHTML = '';

            // Add fields based on section type
            switch(section) {
                case 'officers':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" id="editName" value="${record.name || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Badge Number</label>
                            <input type="text" class="form-control" id="editBadge" value="${record.badge || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Rank</label>
                            <input type="text" class="form-control" id="editRank" value="${record.rank || ''}">
                        </div>`;
                    break;
                case 'suspects':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" id="editName" value="${record.name || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Date of Birth</label>
                            <input type="date" class="form-control" id="editDob" value="${record.dob || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control" id="editStatus">
                                <option value="At Large" ${record.status === 'At Large' ? 'selected' : ''}>At Large</option>
                                <option value="Arrested" ${record.status === 'Arrested' ? 'selected' : ''}>Arrested</option>
                                <option value="Under Investigation" ${record.status === 'Under Investigation' ? 'selected' : ''}>Under Investigation</option>
                            </select>
                        </div>`;
                    break;
                case 'cases':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Case Number</label>
                            <input type="text" class="form-control" id="editCaseNumber" value="${record.caseNumber || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Title</label>
                            <input type="text" class="form-control" id="editTitle" value="${record.title || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control" id="editStatus">
                                <option value="Open" ${record.status === 'Open' ? 'selected' : ''}>Open</option>
                                <option value="Closed" ${record.status === 'Closed' ? 'selected' : ''}>Closed</option>
                                <option value="Pending" ${record.status === 'Pending' ? 'selected' : ''}>Pending</option>
                            </select>
                        </div>`;
                    break;
                case 'drugs':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" id="editName" value="${record.name || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Type</label>
                            <select class="form-control" id="editType">
                                <option value="Narcotic" ${record.type === 'Narcotic' ? 'selected' : ''}>Narcotic</option>
                                <option value="Stimulant" ${record.type === 'Stimulant' ? 'selected' : ''}>Stimulant</option>
                                <option value="Hallucinogen" ${record.type === 'Hallucinogen' ? 'selected' : ''}>Hallucinogen</option>
                                <option value="Cannabis" ${record.type === 'Cannabis' ? 'selected' : ''}>Cannabis</option>
                                <option value="Dissociative" ${record.type === 'Dissociative' ? 'selected' : ''}>Dissociative</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Schedule</label>
                            <select class="form-control" id="editSchedule">
                                <option value="Illegal" ${record.schedule === 'Illegal' ? 'selected' : ''}>Illegal</option>
                                <option value="Controlled" ${record.schedule === 'Controlled' ? 'selected' : ''}>Controlled</option>
                            </select>
                        </div>`;
                    break;
                case 'violations':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Type</label>
                            <select class="form-control" id="editType">
                                <option value="Possession" ${record.type === 'Possession' ? 'selected' : ''}>Possession</option>
                                <option value="Trafficking" ${record.type === 'Trafficking' ? 'selected' : ''}>Trafficking</option>
                                <option value="Distribution" ${record.type === 'Distribution' ? 'selected' : ''}>Distribution</option>
                                <option value="Manufacturing" ${record.type === 'Manufacturing' ? 'selected' : ''}>Manufacturing</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <input type="text" class="form-control" id="editDescription" value="${record.description || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Severity</label>
                            <select class="form-control" id="editSeverity">
                                <option value="Prison" ${record.severity === 'Prison' ? 'selected' : ''}>Prison</option>
                                <option value="Fine" ${record.severity === 'Fine' ? 'selected' : ''}>Fine</option>
                                <option value="Probation" ${record.severity === 'Probation' ? 'selected' : ''}>Probation</option>
                            </select>
                        </div>`;
                    break;
                case 'seizures':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="editDate" value="${record.date || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Location</label>
                            <input type="text" class="form-control" id="editLocation" value="${record.location || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Value</label>
                            <input type="text" class="form-control" id="editValue" value="${record.value || ''}">
                        </div>`;
                    break;
                case 'evidence':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Type</label>
                            <select class="form-control" id="editType">
                                <option value="Drug Sample" ${record.type === 'Drug Sample' ? 'selected' : ''}>Drug Sample</option>
                                <option value="Container" ${record.type === 'Container' ? 'selected' : ''}>Container</option>
                                <option value="Chemical" ${record.type === 'Chemical' ? 'selected' : ''}>Chemical</option>
                                <option value="Equipment" ${record.type === 'Equipment' ? 'selected' : ''}>Equipment</option>
                                <option value="Drug Package" ${record.type === 'Drug Package' ? 'selected' : ''}>Drug Package</option>
                                <option value="Substance" ${record.type === 'Substance' ? 'selected' : ''}>Substance</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <input type="text" class="form-control" id="editDescription" value="${record.description || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control" id="editStatus">
                                <option value="In Storage" ${record.status === 'In Storage' ? 'selected' : ''}>In Storage</option>
                                <option value="Under Review" ${record.status === 'Under Review' ? 'selected' : ''}>Under Review</option>
                                <option value="Analyzed" ${record.status === 'Analyzed' ? 'selected' : ''}>Analyzed</option>
                            </select>
                        </div>`;
                    break;
                case 'arrests':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="editDate" value="${record.date || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Suspect</label>
                            <input type="text" class="form-control" id="editSuspect" value="${record.suspect || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Location</label>
                            <input type="text" class="form-control" id="editLocation" value="${record.location || ''}">
                        </div>`;
                    break;
                case 'legal':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Case</label>
                            <input type="text" class="form-control" id="editCase" value="${record.case || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Type</label>
                            <select class="form-control" id="editType">
                                <option value="Trial" ${record.type === 'Trial' ? 'selected' : ''}>Trial</option>
                                <option value="Hearing" ${record.type === 'Hearing' ? 'selected' : ''}>Hearing</option>
                                <option value="Plea" ${record.type === 'Plea' ? 'selected' : ''}>Plea</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control" id="editStatus">
                                <option value="Guilty" ${record.status === 'Guilty' ? 'selected' : ''}>Guilty</option>
                                <option value="Not Guilty" ${record.status === 'Not Guilty' ? 'selected' : ''}>Not Guilty</option>
                                <option value="Pending" ${record.status === 'Pending' ? 'selected' : ''}>Pending</option>
                            </select>
                        </div>`;
                    break;
                case 'rewards':
                    editFields.innerHTML = `
                        <div class="mb-3">
                            <label class="form-label">Amount</label>
                            <input type="text" class="form-control" id="editAmount" value="${record.amount || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <input type="text" class="form-control" id="editDescription" value="${record.description || ''}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control" id="editStatus">
                                <option value="Available" ${record.status === 'Available' ? 'selected' : ''}>Available</option>
                                <option value="Paid" ${record.status === 'Paid' ? 'selected' : ''}>Paid</option>
                                <option value="Claimed" ${record.status === 'Claimed' ? 'selected' : ''}>Claimed</option>
                            </select>
                        </div>`;
                    break;
                default:
                    editFields.innerHTML = '<div class="alert alert-warning">Edit functionality not implemented for this section</div>';
            }

            // Show the modal
            const editModal = new bootstrap.Modal(document.getElementById('editModal'));
            editModal.show();
        }

        // Function to save edited record
        function saveEdit() {
            const id = parseInt(document.getElementById('editId').value);
            const section = document.getElementById('editSection').value;
            const recordIndex = userData[section].findIndex(item => item.id === id);
            
            if (recordIndex === -1) return;

            // Hide the modal first
            const editModal = bootstrap.Modal.getInstance(document.getElementById('editModal'));
            editModal.hide();

            // Update the record based on section type
            switch(section) {
                case 'officers':
                    userData[section][recordIndex] = {
                        id: id,
                        name: document.getElementById('editName').value,
                        badge: document.getElementById('editBadge').value,
                        rank: document.getElementById('editRank').value
                    };
                    break;
                case 'suspects':
                    userData[section][recordIndex] = {
                        id: id,
                        name: document.getElementById('editName').value,
                        dob: document.getElementById('editDob').value,
                        status: document.getElementById('editStatus').value
                    };
                    break;
                case 'cases':
                    userData[section][recordIndex] = {
                        id: id,
                        caseNumber: document.getElementById('editCaseNumber').value,
                        title: document.getElementById('editTitle').value,
                        status: document.getElementById('editStatus').value
                    };
                    break;
                case 'drugs':
                    userData[section][recordIndex] = {
                        id: id,
                        name: document.getElementById('editName').value,
                        type: document.getElementById('editType').value,
                        schedule: document.getElementById('editSchedule').value
                    };
                    break;
                case 'violations':
                    userData[section][recordIndex] = {
                        id: id,
                        type: document.getElementById('editType').value,
                        description: document.getElementById('editDescription').value,
                        severity: document.getElementById('editSeverity').value
                    };
                    break;
                case 'seizures':
                    userData[section][recordIndex] = {
                        id: id,
                        date: document.getElementById('editDate').value,
                        location: document.getElementById('editLocation').value,
                        value: document.getElementById('editValue').value
                    };
                    break;
                case 'evidence':
                    userData[section][recordIndex] = {
                        id: id,
                        type: document.getElementById('editType').value,
                        description: document.getElementById('editDescription').value,
                        status: document.getElementById('editStatus').value
                    };
                    break;
                case 'arrests':
                    userData[section][recordIndex] = {
                        id: id,
                        date: document.getElementById('editDate').value,
                        suspect: document.getElementById('editSuspect').value,
                        location: document.getElementById('editLocation').value
                    };
                    break;
                case 'legal':
                    userData[section][recordIndex] = {
                        id: id,
                        case: document.getElementById('editCase').value,
                        type: document.getElementById('editType').value,
                        status: document.getElementById('editStatus').value
                    };
                    break;
                case 'rewards':
                    userData[section][recordIndex] = {
                        id: id,
                        amount: document.getElementById('editAmount').value,
                        description: document.getElementById('editDescription').value,
                        status: document.getElementById('editStatus').value
                    };
                    break;
            }

            // Update the table row immediately
            const tableBody = document.getElementById(`${section}TableBody`);
            const row = tableBody.querySelector(`tr:nth-child(${recordIndex + 1})`);
            if (row) {
                const record = userData[section][recordIndex];
                let cells = '';
                cells += `<td>${record.id}</td>`;
                
                switch(section) {
                    case 'officers':
                        cells += `<td>${record.name}</td><td>${record.badge}</td><td>${record.rank}</td>`;
                        break;
                    case 'suspects':
                        cells += `<td>${record.name}</td><td>${record.dob}</td><td>${record.status}</td>`;
                        break;
                    case 'cases':
                        cells += `<td>${record.caseNumber}</td><td>${record.title}</td><td>${record.status}</td>`;
                        break;
                    case 'drugs':
                        cells += `<td>${record.name}</td><td>${record.type}</td><td>${record.schedule}</td>`;
                        break;
                    case 'violations':
                        cells += `<td>${record.type}</td><td>${record.description}</td><td>${record.severity}</td>`;
                        break;
                    case 'seizures':
                        cells += `<td>${record.date}</td><td>${record.location}</td><td>${record.value}</td>`;
                        break;
                    case 'evidence':
                        cells += `<td>${record.type}</td><td>${record.description}</td><td>${record.status}</td>`;
                        break;
                    case 'arrests':
                        cells += `<td>${record.date}</td><td>${record.suspect}</td><td>${record.location}</td>`;
                        break;
                    case 'legal':
                        cells += `<td>${record.case}</td><td>${record.type}</td><td>${record.status}</td>`;
                        break;
                    case 'rewards':
                        cells += `<td>${record.amount}</td><td>${record.description}</td><td>${record.status}</td>`;
                        break;
                }
                
                cells += `<td class="action-buttons">
                    <button class="btn btn-sm btn-info" onclick="editRecord('${section}', ${record.id})">
                        <i class="bi bi-pencil"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deleteRecord('${section}', ${record.id})">
                        <i class="bi bi-trash"></i>
                    </button>
                </td>`;
                
                row.innerHTML = cells;
            }

            // Update database.sql file with notification
            updateDatabaseFile(true);
        }

        // Function to delete record
        function deleteRecord(section, id) {
            if (confirm(`Are you sure you want to delete this ${section} record?`)) {
                const recordIndex = userData[section].findIndex(item => item.id === id);
                if (recordIndex !== -1) {
                    userData[section].splice(recordIndex, 1);
                    
                    // Update database.sql file without showing notification
                    updateDatabaseFile(false);
                    
                    loadData(section);
                }
            }
        }
    </script>
</body>
</html> 